# StarCell — Ideal Features Roadmap

> **This document is maintained by @qcruz.**
> Claude reads this as a reference when scoping new work. Do not edit this file during development sessions — it is the authoritative list of desired features, written and managed by the project owner.
>
> Mark completed items with `- [x] ~~item~~ — completed!` as features ship.

---

## Meta Goals
> Keep these in mind when making any development decision.

- Make a fun and playable fantasy adventure game.
- Keep the project open-source and easy for others to learn, contribute to, and build their own games from.
- Discover deep-value additions: simple mechanics that add the most to gameplay. Simple interfaces for inventory, quests, trading, crafting, followers, spells, tools, etc. Emergent environmental complexity through simple rules (cellular automata, proc gen). Art and design that encourages and rewards exploration, decoration, crafting, combat, building, managing, and collecting.
- Make the game world as detailed and realistic as possible while balancing the above goals.
- Regularly review the codebase at a high level. Remove redundancies and overly specific code that can be generalized. Always look for ways to combine features or unify code to get the same result with fewer variables.

---

## Pending Features

### Structure Progression
- [ ] Houses upgrade over time based on zone conditions
- [ ] Zone with lumberjack + miner → stone house variant
- [ ] Zone with stone house + blacksmith → fort
- [ ] Guards spawn at fort and protect it
- [ ] Fort → Castle progression
- [ ] Castle has interior guards and a King who retreats inside when health is low
- [ ] When zone is attacked, guards and a commander spawn from the castle (if not already present)

---

### New Entity Types

**Hostile / Rare**
- [ ] Rare enemy type variants (TBD — design pass needed)
- [ ] Golem (stone) — very slow, high defense and health, attacks only when attacked; used to block entries

**Peaceful / Animals**
- [ ] Birds
- [ ] Sheep (placeholder exists; behavior pass needed)
- [ ] Cow
- [ ] Chicken

---

### New Items & Crops

**Crops**
- [ ] Fruit trees
- [ ] Melons
- [ ] Wheat
- [ ] Ghost Fruit
- [ ] Cactus — spawns in desert biomes (slightly less often than trees in forest); damages player and NPCs by 1 on contact/attack; NPC pathfinding gradually clears it over time

**Resources & Materials**
- [ ] Iron Ore — spawns commonly in caves; miners seek it aggressively (similar to lumberjacks and trees); mining yields XP; higher-level miners have an increased chance to generate a deeper cave level (level 1 miner = 1% chance per update); leaving a deeper cave requires traveling back up through each level *(sprite added: `ironore.png`)*
- [ ] Sword item — replaces or supplements existing bone sword slot *(sprite added: `sword.png`)*
- [ ] Magic Crystal — AoE zone effect (reduce zone damage, bonus fire damage, etc.)
- [ ] Peace Tree — zone becomes peaceful; starting zone should always have one
- [ ] Gravestone
- [ ] Fence

**Structures**
- [ ] Water Well — constructed by Miners; requires 2+ houses in zone and no existing well; placed near zone center; permanent water source for human NPCs only; targeted by bandits/goblins but low destruction chance *(sprite added: `well.png`)*

**Crafting**
- [ ] Design pass: new recipes creating natural progression and quest goals (iron tools, stone walls, etc.)

---

### Spells
- [ ] **Rain** — toggle rain on/off in the current zone
- [ ] **Calcify** — freeze an NPC in place / turn to stone
- [ ] **Charm** — toggle NPC between friendly and hostile
- [ ] **Heal** — fill player health, food, and water; chance to increase max life; reverse (K key) absorbs health from target and may drain years of life
- [ ] **Spectral State** — player briefly passes through solid cells (not outer walls)

---

### NPC Behavior Updates
- [ ] All NPCs (hostile and peaceful) occasionally swipe at obstacles blocking their path — small chance to destroy the cell based on type; extends existing bandit-attacks-structures logic to cover trees, rocks, fences, etc.
- [ ] Miner: seek iron ore in caves aggressively; exit cave when health is low; chance to dig a deeper cave level scaled by miner level
- [ ] Natural flee system — low-level enemies flee significantly higher-level enemies (~5+ level difference)

---

### Follower System Improvements
- [ ] Followers are never hostile to each other
- [ ] Hostile entity list clears correctly when the target dies (bug: skeleton still appears in follower slot after it dies)
- [ ] When item inventory and follower inventory are both open, selecting an item and pressing Place puts it in the follower's inventory
- [ ] Follower auto-equips the strongest version of each gear type (sword, armor, etc.) for combat and stat calculations

---

### LoreEngine Expansions
- [ ] Migration events
- [ ] Natural disaster events
- [ ] Invasion / raid events
- [ ] Obstructions — block zone exits until cleared; may be NPCs or hard-to-destroy structures (e.g. Golem)
- [ ] Zone and NPC name generation — unique, flavored names (e.g. "Redoak Grove"); zone generation influenced by its assigned name
- [ ] Secret lairs / additional secret entrance types *(foundation already in place)*

---

### Lifetime System
- [ ] Player character gradually loses max life as they age → permadeath pressure
- [ ] Multiple ways to extend life (emergent quest hooks):
  - [ ] Vampirism
  - [ ] Fairy fountain
  - [ ] Blood fountain

---

### Perk / Skill System
- [ ] Perks earned through natural gameplay (e.g. killing goblins repeatedly builds a goblin-damage bonus)
- [ ] Perks decay slowly over time if not maintained

---

### Reputation & Favor Systems

**Hostile/Peaceful Score** *(player-carried, -100 to 100)*
- [ ] Updated by attacking peaceful or hostile entities
- [ ] Influences default favor score with all entity types
- [ ] Low score → factions and NPCs become aggressive on sight
- [ ] High hostility + high player level → enemy NPCs flee on sight

**Favor System** *(NPC-carried, -100 to 100)*
- [ ] Tracks individual NPC favorability toward the player
- [ ] Loyalty threshold: high favor + matching reputation score may cause NPC to become a follower
- [ ] Works on animals too (cats, dogs, etc.) as an alternative to enchant/follower spell
- [ ] Follower conversion chance decreases per existing follower already in party

---

### Contagion System
> Primarily for fast updates and catch-up processing.

- [ ] Averages NPC stats and inventory passively based on proximity (invisible to player)
- [ ] Spreads player reputation scores across nearby same-type entities
- [ ] Factions spread player favorability scores to allied entities

---

### RainbowMaker (Sprite Variants)
- [ ] Sprite colors randomizable via a built-in system (e.g. white cow with black spots → red cow with gold spots)
- [ ] Rare color variants create hunting and collecting gameplay

---

### Entity Genetics
- [ ] Core NPC behaviors numerically determined and mutating slowly over time (potentially via Contagion System)
- [ ] Genetic variation reflected in sprite color/variant chances

---

### Quest Select System
- [ ] When inventory and quest panel are both open, quest target defaults to the currently selected item type if applicable

---

### BugCatcher System
- [ ] Tracks game performance and detects out-of-balance states (collision overlaps, overpopulated zones, stuck/teleporting NPCs, etc.)
- [ ] Tiered auto-correction responses:
  - [ ] Zone too dense → re-roll or spawn termite invasion
  - [ ] NPC stuck / teleporting / too high level → force full update + trigger invasion event
  - [ ] Zone population too far out of balance → LoreEngine procs natural disaster or migration

---

### Audio
- [ ] Background music
- [ ] Ambient sound effects (rain, wind, fire)
- [ ] Action sound effects (combat, crafting, spells)

---

### Miscellaneous
- [ ] Minimap or zone map view
- [ ] In-game help overlay / context-sensitive tips

---

## Completed Features

- [x] ~~Modular file structure refactor~~ — completed!
- [x] ~~macOS .app launcher with auto-update from GitHub~~ — completed!
- [x] ~~Autopilot toggle (Shift+A), off by default~~ — completed!
- [x] ~~Secret cave entrances via MINESHAFT in house interiors~~ — completed!
- [x] ~~Secret cave exit routing (maps to overworld cave entrance or back to house)~~ — completed!
